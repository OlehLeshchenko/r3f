import{O as c,m as f,B as x,bx as d,Y as g,a as m,b as u,e as y}from"./index-DAa9yKAB.js";const o=x(14);class l extends c{#t;#s;#e;moveDrag(s,t){this.#t+=s,this.#s+=t,f(this.getG().select("path"),this.#t,this.#s)}moveEnd(s){if(s)return;const t=this.getObject(),i=this.getAxisToSvgFunc(this.#e);let n="";for(let e=0;e<=t.fLastPoint;++e){const r=this.svgToAxis("x",i.x(t.fX[e])+this.#t,this.#e),a=this.svgToAxis("y",i.y(t.fY[e])+this.#s,this.#e);t.fX[e]=r,t.fY[e]=a,n+=`SetPoint(${e},${r},${a});;`}this.submitCanvExec(n+"Notify();;"),this.redraw()}getUserRanges(){const s=this.getObject();if(s.TestBit(o)||!s.fLastPoint)return null;let i=s.fX[0],n=i,e=s.fY[0],r=e;for(let a=1;a<=s.fLastPoint;++a)i=Math.min(i,s.fX[a]),n=Math.max(n,s.fX[a]),e=Math.min(e,s.fY[a]),r=Math.max(r,s.fY[a]);return{minx:i,miny:e,maxx:n,maxy:r}}redraw(){const s=this.createG(),t=this.getObject(),i=t.TestBit(o),n=this.getDrawOpt()||t.fOption,e=t._typename===d&&g(n)&&n.toLowerCase().indexOf("f")>=0,r=this.getAxisToSvgFunc(i);this.createAttLine({attr:t}),this.createAttFill({attr:t,enable:e});let a="";for(let h=0;h<=t.fLastPoint;++h)a+=`${h>0?"L":"M"}${r.x(t.fX[h])},${r.y(t.fY[h])}`;return s.append("svg:path").attr("d",a+(e?"Z":"")).call(e?()=>{}:this.lineatt.func).call(this.fillatt.func),m(this),u(this),this.#t=this.#s=0,this.#e=i,this}static async draw(s,t,i){const n=new l(s,t,i);return y(n,!1).then(()=>n.redraw())}}export{l as TPolyLinePainter};
