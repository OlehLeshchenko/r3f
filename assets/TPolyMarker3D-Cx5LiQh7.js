import{u as d,K as m,P}from"./index-DAa9yKAB.js";async function M(){const e=this.$fp||this.getFramePainter();if(delete this.$fp,!d(e)||!e.grx||!e.gry||!e.grz)return this;const l=this.getObject(),x=5e4,i=l.fP;let a=1,n=0;for(let t=0;t<i.length;t+=3)i[t]<e.scale_xmin||i[t]>e.scale_xmax||i[t+1]<e.scale_ymin||i[t+1]>e.scale_ymax||i[t+2]<e.scale_zmin||i[t+2]>e.scale_zmax||++n;m.OptimizeDraw>0&&n>x&&(a=Math.max(2,Math.floor(n/x)));const f=Math.floor(n/a),o=new P(f,e.webgl,e.size_x3d/100),h=new Int32Array(f);let c=0,_=0;for(let t=0;t<i.length;t+=3)i[t]<e.scale_xmin||i[t]>e.scale_xmax||i[t+1]<e.scale_ymin||i[t+1]>e.scale_ymax||i[t+2]<e.scale_zmin||i[t+2]>e.scale_zmax||a>1&&(c=(c+1)%a,c)||(h[_++]=t,o.addPoint(e.grx(i[t]),e.gry(i[t+1]),e.grz(i[t+2])));return o.createPoints({color:this.getColor(l.fMarkerColor),style:l.fMarkerStyle}).then(t=>(t.tip_color=l.fMarkerColor===3?16711680:65280,t.tip_name=l.fName||"Poly3D",t.poly=l,t.fp=e,t.scale0=.7*o.scale,t.index=h,e.add3DMesh(t,this,!0),t.tooltip=function(z){let s=Math.floor(z.index/this.nvertex);if(s<0||s>=this.index.length)return null;s=this.index[s];const r=this.fp,y=r.grx(this.poly.fP[s]),p=r.gry(this.poly.fP[s+1]),g=r.grz(this.poly.fP[s+2]);return{x1:y-this.scale0,x2:y+this.scale0,y1:p-this.scale0,y2:p+this.scale0,z1:g-this.scale0,z2:g+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+s/3,"x: "+r.axisAsText("x",this.poly.fP[s]),"y: "+r.axisAsText("y",this.poly.fP[s+1]),"z: "+r.axisAsText("z",this.poly.fP[s+2])]}},e.render3D(100),this))}export{M as d};
